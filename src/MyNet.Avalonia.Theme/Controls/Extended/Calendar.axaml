<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:my="http://mynet.com/avalonia"
                    x:CompileBindings="True">

    <ControlTheme x:Key="MyNet.Theme.Button.Embedded.Calendar" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="Margin" Value="{my:Thickness Small}" />
        <Setter Property="Padding" Value="4" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="my:ThemeAssist.ActiveBackground" Value="{Binding $parent[my:Calendar].(my:ThemeAssist.PrimaryColor)}" />
        <Setter Property="my:ThemeAssist.ActiveForeground" Value="{my:Brush $self.(my:ThemeAssist.ActiveBackground), Contrast=True}" />
        <Setter Property="CornerRadius" Value="{StaticResource MyNet.CornerRadius.Control}" />
        <Setter Property="Template">
            <ControlTemplate>
                <Panel Name="PART_RootPanel">

                    <Border Name="PART_MainBorder"
                            my:ShadowAssist.ShadowDepth="{TemplateBinding my:ShadowAssist.ShadowDepth}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}" />

                    <Border Name="PART_ActiveBorder"
                            Background="{TemplateBinding my:ThemeAssist.ActiveBackground}"
                            BorderBrush="{TemplateBinding my:ThemeAssist.ActiveBorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Theme="{StaticResource MyNet.Theme.Border.State}" />

                    <Border Name="PART_HoverBorder"
                            Background="{TemplateBinding my:ThemeAssist.HoverBackground}"
                            BorderBrush="{TemplateBinding my:ThemeAssist.HoverBorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Theme="{StaticResource MyNet.Theme.Border.State}" />

                    <Border ClipToBounds="True" CornerRadius="{TemplateBinding CornerRadius}">
                        <my:Ripple Name="PART_Ripple" RippleFill="{TemplateBinding my:ThemeAssist.RippleColor}">
                            <ContentPresenter Name="PART_ContentPresenter"
                                              Padding="{TemplateBinding Padding}"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Stretch"
                                              HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                              BackgroundSizing="{TemplateBinding BackgroundSizing}"
                                              BorderThickness="{TemplateBinding BorderThickness}"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              CornerRadius="{TemplateBinding CornerRadius}"
                                              Foreground="{TemplateBinding Foreground}"
                                              RecognizesAccessKey="True"
                                              TextElement.FontSize="{TemplateBinding FontSize}"
                                              TextElement.FontWeight="{TemplateBinding FontWeight}"
                                              UseLayoutRounding="False" />
                        </my:Ripple>
                    </Border>
                </Panel>
            </ControlTemplate>
        </Setter>

        <Style Selector="^.Range">
            <Setter Property="Margin" Value="{my:Thickness Small, Vertical}" />

            <Style Selector="^ /template/ Border#PART_ActiveBorder">
                <Setter Property="my:ClassesAssist.AddClasses" Value="no-transitions" />
            </Style>
            <Style Selector="^ /template/ Border#PART_HoverBorder">
                <Setter Property="my:ClassesAssist.AddClasses" Value="no-transitions" />
            </Style>
        </Style>

        <Style Selector="^:in-range">
            <Setter Property="CornerRadius" Value="0" />

            <Style Selector="^ /template/ Border#PART_ActiveBorder">
                <Setter Property="Opacity" Value="{StaticResource MyNet.Opacity.Overlay}" />
            </Style>
        </Style>

        <!-- Active -->
        <Style Selector="^:selected, ^:start-date, ^:end-date">
            <Setter Property="Foreground" Value="{Binding $self.(my:ThemeAssist.ActiveForeground)}" />

            <Style Selector="^ /template/ Border#PART_ActiveBorder">
                <Setter Property="Opacity" Value="1" />
            </Style>
        </Style>

        <Style Selector="^:today">
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{Binding $self.(my:ThemeAssist.ActiveBackground)}" />
        </Style>

        <Style Selector="^:inactive /template/ Panel#PART_RootPanel">
            <Setter Property="Opacity" Value="{StaticResource MyNet.Opacity.Tertiary}" />
        </Style>

        <Style Selector="^:preview-start-date, ^:preview-end-date">

            <Style Selector="^ /template/ Border#PART_ActiveBorder">
                <Setter Property="Opacity" Value="{StaticResource MyNet.Opacity.Secondary}" />
            </Style>
        </Style>

        <Style Selector="^:start-date, ^:preview-start-date">
            <Setter Property="CornerRadius" Value="{Binding Source={StaticResource MyNet.CornerRadius.Control}, Converter={x:Static my:CornerRadiusConverter.Left}}" />
        </Style>

        <Style Selector="^:end-date, ^:preview-end-date">
            <Setter Property="CornerRadius" Value="{Binding Source={StaticResource MyNet.CornerRadius.Control}, Converter={x:Static my:CornerRadiusConverter.Right}}" />
        </Style>

        <Style Selector="^:blackout /template/ Panel#PART_RootPanel">
            <Setter Property="Opacity" Value="{StaticResource MyNet.Opacity.Disabled}" />
        </Style>
    </ControlTheme>

    <ControlTheme x:Key="{x:Type my:CalendarDayButton}" TargetType="my:CalendarDayButton" BasedOn="{StaticResource MyNet.Theme.Button.Embedded.Calendar}" />
    <ControlTheme x:Key="{x:Type my:CalendarYearButton}" TargetType="my:CalendarYearButton" BasedOn="{StaticResource MyNet.Theme.Button.Embedded.Calendar}" />

    <ControlTheme x:Key="{x:Type my:Calendar}" TargetType="my:Calendar">
        <Setter Property="HorizontalAlignment" Value="{StaticResource MyNet.HorizontalAlignment.Container}" />
        <Setter Property="VerticalAlignment" Value="{StaticResource MyNet.VerticalAlignment.Container}" />
        <Setter Property="CornerRadius" Value="{StaticResource MyNet.CornerRadius.Container}" />
        <Setter Property="Padding" Value="{StaticResource MyNet.Padding.Container}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="my:ShadowAssist.ShadowDepth" Value="Depth0" />
        <Setter Property="ClipToBounds" Value="False" />
        <Setter Property="MinWidth" Value="240" />
        <Setter Property="MinHeight" Value="250" />
        <Setter Property="DayTitleTemplate">
            <Template>
                <TextBlock Margin="{my:Thickness Default,
                                                 Bottom}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           x:DataType="x:String"
                           FontSize="{StaticResource MyNet.Font.Size.SubCaption}"
                           Opacity="{StaticResource MyNet.Opacity.Secondary}"
                           Text="{Binding}" />
            </Template>
        </Setter>

        <Style Selector="^">
            <Setter Property="my:ThemeAssist.PrimaryColor" Value="{DynamicResource MyNet.Brush.Primary}" />
            <Setter Property="Background" Value="{DynamicResource MyNet.Brush.Container.Background}" />
            <Setter Property="BorderBrush" Value="{DynamicResource MyNet.Brush.Container.Border}" />
        </Style>

        <Setter Property="Template">
            <ControlTemplate TargetType="my:Calendar">
                <Border Padding="{TemplateBinding Padding}"
                        my:ShadowAssist.ShadowDepth="{TemplateBinding my:ShadowAssist.ShadowDepth}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius}">
                    <Grid MinWidth="{TemplateBinding MinWidth}"
                          MinHeight="{TemplateBinding MinHeight}"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          RowDefinitions="Auto, *">
                        <Grid Grid.Row="0" Margin="{my:Thickness Medium, Bottom}" ColumnDefinitions="Auto, Auto,*, Auto, Auto">
                            <Button Name="{x:Static my:Calendar.PartFastPreviousButton}"
                                    Grid.Column="0"
                                    Classes="Text Small no-disablable"
                                    Content="{my:Icon ChevronDoubleLeft}"
                                    Focusable="False" />
                            <Button Name="{x:Static my:Calendar.PartPreviousButton}"
                                    Grid.Column="1"
                                    Classes="Text Small no-disablable"
                                    Content="{my:Icon ChevronLeft}"
                                    Focusable="False" />

                            <Grid Grid.Column="2" ColumnDefinitions="*, *">
                                <Button Name="{x:Static my:Calendar.PartMonthButton}"
                                        Grid.Column="0"
                                        HorizontalAlignment="Stretch"
                                        Classes="Text Small no-disablable"
                                        Content="{my:Translation DisplayDateContext,
                                                                 Casing=Title,
                                                                 RelativeSource={RelativeSource TemplatedParent}}"
                                        Focusable="False" />
                                <Button Name="{x:Static my:Calendar.PartYearButton}"
                                        Grid.Column="1"
                                        HorizontalAlignment="Stretch"
                                        Classes="Text Small no-disablable"
                                        Content="{ReflectionBinding DisplayDateContext.Year,
                                                                    FallbackValue='',
                                                                    RelativeSource={RelativeSource TemplatedParent}}"
                                        Focusable="False" />
                                <Button Name="{x:Static my:Calendar.PartHeaderButton}"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        HorizontalAlignment="Stretch"
                                        Classes="Text Small no-disablable"
                                        Content="{my:Translation DisplayDateContext,
                                                                 RelativeSource={RelativeSource TemplatedParent}}"
                                        Focusable="False"
                                        IsVisible="False" />
                            </Grid>

                            <Button Name="{x:Static my:Calendar.PartNextButton}"
                                    Grid.Column="3"
                                    Classes="Text Small no-disablable"
                                    Content="{my:Icon ChevronRight}"
                                    Focusable="False" />
                            <Button Name="{x:Static my:Calendar.PartFastNextButton}"
                                    Grid.Column="4"
                                    Classes="Text Small no-disablable"
                                    Content="{my:Icon ChevronDoubleRight}"
                                    Focusable="False" />
                        </Grid>
                        <Grid Name="{x:Static my:Calendar.PartMonthGrid}"
                              Grid.Row="1"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch"
                              ColumnDefinitions="*, *, *, *, *, *, *"
                              RowDefinitions="*, Auto, *, *, *, *, *, *" />
                        <Grid Name="{x:Static my:Calendar.PartYearGrid}"
                              Grid.Row="1"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch"
                              ColumnDefinitions="*, *, *"
                              IsVisible="False"
                              RowDefinitions="*, *, *, *" />
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:year, ^:decade, ^:century">
            <Style Selector="^ /template/ Grid#PART_YearGrid">
                <Setter Property="IsVisible" Value="True" />
            </Style>
            <Style Selector="^ /template/ Button#PART_HeaderButton">
                <Setter Property="IsVisible" Value="True" />
            </Style>
            <Style Selector="^ /template/ Button#PART_FastNextButton">
                <Setter Property="IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Button#PART_FastPreviousButton">
                <Setter Property="IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Button#PART_YearButton">
                <Setter Property="IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Button#PART_MonthButton">
                <Setter Property="IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Grid#PART_MonthGrid">
                <Setter Property="IsVisible" Value="False" />
            </Style>
        </Style>
    </ControlTheme>
</ResourceDictionary>
